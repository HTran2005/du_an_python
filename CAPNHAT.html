{% load static %}
<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>GTDLL - Kh√¥ng gian ƒë·ªçc s√°ch</title>
  <link rel="stylesheet" href="{% static 'user1/css/TRANGCHU.css' %}">
</head>
<body>
  <div class="sidebar">
    <div class="profile">
      <img src="{% static 'user1/images/28.jpg' %}" alt="avatar">
      <p>buddy system</p>
    </div>
    <div class="menu-section">
      <p class="menu-title">Your Favorite</p>
      <ul>
        <li><a href="{% url 'trangchu' %}">üè† Trang ch·ªß</a></li>
        <li><a href="{% url 'danhmucsach' %}">üìö Danh m·ª•c s√°ch</a></li>
         <li><a href="{% url 'themsach' %}">üîç Th√™m s√°ch</a></li>
         <li><a href="{% url 'lichsu' %}">üïì L·ªãch s·ª≠ m∆∞·ª£n</li>
         <li class="active">üìù C·∫≠p nh·∫≠t</a></li>
      </ul>

      <p class="menu-title">Your List</p>
      <ul>
        <li>üìñ Biography</li>
        <li>üìò Read Story</li>
        <li>ü§´ Quiet</li>
      </ul>
       
      <p class="menu-title">Your Collection</p>
      <ul class="collection">
        <li>
             <a href="{% url 'tu_duy_chi_tiet' %}">
             <img src="{% static 'user1/images/20.jpg' %}" alt="·∫¢nh s√°ch" width="200">
             T∆∞ duy nhanh v√† ch·∫≠m
             </a>
        </li>
        <li>
             <a href="{% url 'sach_thep' %}">
             <img src="{% static 'user1/images/16.jpg' %}" alt="·∫¢nh s√°ch" width="200">
             Th√©p ƒë√£ t√¥i th·∫ø ƒë·∫•y
             </a>
        </li>
        <li>
             <a href="{% url 'tu_tot_den_vi_dai' %}">
             <img src="{% static 'user1/images/27.jpg' %}" alt="·∫¢nh s√°ch" width="200">
             T·ª´ t·ªët ƒë·∫øn vƒ© ƒë·∫°i
             </a>
        </li>
        <li>
             <a href="{% url 'luoc_su_tg' %}">
             <img src="{% static 'user1/images/a4.jpg' %}" alt="·∫¢nh s√°ch" width="200">
             L∆∞·ª£c s·ª≠ th·ªùi gian
             </a>
        </li>
       <li>
             <a href="{% url 'code' %}">
             <img src="{% static 'user1/images/11.jpg' %}" alt="·∫¢nh s√°ch" width="200">
             Code Complete
             </a>
        </li>
      </ul>
    </div>
  </div>

  <div class="main">
    <div class="top-bar">
      <div class="search-bar">
        <input list="bookList" id="searchInput" placeholder="T√¨m ki·∫øm">
        <datalist id="bookList">
          <option value="D·∫•n th√¢n">
          <option value="T√¥i t√†i gi·ªèi, b·∫°n c≈©ng th·∫ø!">
          <option value="ƒê·∫Øc Nh√¢n T√¢m">
          <option value="Tu·ªïi tr·∫ª ƒë√°ng gi√° bao nhi√™u">
          <option value="Nh√† gi·∫£ kim">
          <option value="Mu√¥n ki·∫øp nh√¢n sinh">
        </datalist>
        <button onclick="searchBook()">T√¨m ki·∫øm</button>
      </div>
      <div class="logo">GTDLL</div>
    </div>



    <div class="banner">
          <img src="{% static 'user1/images/26.jpg' %}" alt="banner">
          <div class="overlay"></div>
          <div class="banner-text">
          <h2>Ch√†o m·ª´ng ƒë·∫øn v·ªõi GTDLL</h2>
         <p>Kh√¥ng gian ƒë·ªçc d√†nh ri√™ng cho b·∫°n - kh√°m ph√° kho t√†ng tri th·ª©c nh√¢n lo·∫°i.</p>
         </div>
     </div>

    <div class="section">
  <h2 style="margin-top: 20px;">S√°ch t·ªìn trong kho</h2>
  <table id="bangSach" border="1" cellpadding="10" cellspacing="0" style="width: 100%; border-collapse: collapse; margin-bottom: 0px;">
    <thead style="background-color: #333; color: white;">
      <tr>
        <th>M√£ s√°ch</th>
        <th>T√™n s√°ch</th>
        <th>T√°c gi·∫£</th>
        <th>Nh√† xu·∫•t b·∫£n</th>
        <th>S·ªë l∆∞·ª£ng t·ªìn</th>
        <th>H√†nh ƒë·ªông</th> 
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</div>

<script>
fetch("{% url 'lay_sach' %}")
  .then(response => response.json())
  .then(data => {
    const tbody = document.querySelector('#bangSach tbody');
    data.forEach(sach => {
      const row = document.createElement('tr');
      row.innerHTML = `
        <td>${sach.ma_sach}</td>
        <td>${sach.ten_sach}</td>
        <td>${sach.tac_gia}</td>
        <td>${sach.nha_xuat_ban}</td>
        <td>${sach.so_luong}</td>
        <td>
          <button onclick="suaSach(this)">S·ª≠a</button>
          <button onclick="xoaSach('${sach.ma_sach}', this)">X√≥a</button>
        </td>
      `;
      tbody.appendChild(row);
    });
  });

function xoaSach(maSach, button) {
  if (confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a s√°ch n√†y?')) {
    fetch('/xoa_sach/', {
      method: 'POST',
      headers: { 
        'Content-Type': 'application/x-www-form-urlencoded',
        'X-CSRFToken': csrftoken
      },
      body: 'ma_sach=' + encodeURIComponent(maSach)
    })
    .then(res => res.json())
    .then(data => {
      if (data === 'success') {
        alert('‚úÖ X√≥a s√°ch th√†nh c√¥ng!');
        button.closest('tr').remove();
      } else {
        alert('‚ùå X√≥a s√°ch th·∫•t b·∫°i!');
      }
    })
    .catch(error => {
      alert('‚ùå ƒê√£ x·∫£y ra l·ªói!');
      console.error('L·ªói fetch:', error);
    });
  }
}



// H√†m s·ª≠a s√°ch
function suaSach(button) {
  const row = button.closest('tr');
  const cells = row.querySelectorAll('td');

  // L∆∞u gi√° tr·ªã c≈©
  const ma_sach = cells[0].innerText;
  const ten_sach = cells[1].innerText;
  const tac_gia = cells[2].innerText;
  const nha_xuat_ban = cells[3].innerText;
  const so_luong = cells[4].innerText;

  // Chuy·ªÉn c√°c √¥ sang input
  cells[1].innerHTML = `<input value="${ten_sach}">`;
  cells[2].innerHTML = `<input value="${tac_gia}">`;
  cells[3].innerHTML = `<input value="${nha_xuat_ban}">`;
  cells[4].innerHTML = `<input type="number" value="${so_luong}">`;
  cells[5].innerHTML = `
    <button onclick="luuSua(this, '${ma_sach}')">L∆∞u</button>
    <button onclick="location.reload()">H·ªßy</button>
  `;
}

function luuSua(button, ma_sach) {
  const row = button.closest('tr');
  const inputs = row.querySelectorAll('input');

  const ten_sach = inputs[0].value;
  const tac_gia = inputs[1].value;
  const nha_xuat_ban = inputs[2].value;
  const so_luong = inputs[3].value;

  fetch("/api/sua_sach/", {
    method: 'POST',
    headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
    body: new URLSearchParams({
      ma_sach,
      ten_sach,
      tac_gia,
      nha_xuat_ban,
      so_luong
    })
  })
  .then(res => res.text())
  .then(data => {
    if (data.trim() === 'success') {
      alert('C·∫≠p nh·∫≠t th√†nh c√¥ng');
      location.reload();
    } else {
      alert('C·∫≠p nh·∫≠t th√†nh c√¥ng: ' + data);
    }
  });
}
</script>


<!-- SACH DA THEM -->
 <h2 style="margin-top: 20px;">S√°ch ƒë√£ th√™m</h2>
  <table id="bangSach1" border="1" cellpadding="10" cellspacing="0" style="width: 100%; border-collapse: collapse; margin-bottom: 0px;">
    <thead style="background-color: #333; color: white;">
      <tr>
        <th>M√£ s√°ch</th>
        <th>T√™n s√°ch</th>
        <th>T√°c gi·∫£</th>
        <th>M√¥ t·∫£</th>
        <th>ƒê√°nh gi√°</th>
        <th>Ng√†y xu·∫•t b·∫£n</th>
        <th>H√†nh ƒë·ªông</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
<!-- </div> -->

<script>
fetch("/api/lay_sach_them/")
  .then(response => response.json())
  .then(data => {
    const tbody = document.querySelector('#bangSach1 tbody');
    data.forEach(sach => {
      const row = document.createElement('tr');
      row.innerHTML = `
        <td>${sach.ma_sach}</td>
        <td>${sach.ten_sach}</td>
        <td>${sach.tac_gia}</td>
        <td>${sach.mo_ta}</td>
        <td>${sach.danh_gia}</td>
        <td>${sach.ngay_xuat_ban}</td>
        <td>
          <button onclick="suaSach1(this)">S·ª≠a</button>
          <button onclick="xoaSach1('${sach.ma_sach}', this)">X√≥a</button>
        </td>
      `;
      tbody.appendChild(row);
    });
  })
  .catch(error => {
    console.error('L·ªói khi t·∫£i d·ªØ li·ªáu s√°ch:', error);
  });
function xoaSach1(ma_sach, button) {
  if (confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a s√°ch n√†y?')) {
    fetch("/api/xoa_sach_them/", {
      method: 'POST',
      headers: { 
        'Content-Type': 'application/x-www-form-urlencoded',
        'X-CSRFToken': csrftoken
      },
      body: 'ma_sach=' + encodeURIComponent(ma_sach)
    })
    .then(res => res.json())
    .then(data => {
      if (data === 'success') {
        alert('‚úÖ X√≥a s√°ch th√†nh c√¥ng!');
        button.closest('tr').remove();
      } else {
        alert('‚ùå X√≥a s√°ch th·∫•t b·∫°i!');
      }
    })
    .catch(error => {
      alert('‚ùå ƒê√£ x·∫£y ra l·ªói!');
      console.error('L·ªói fetch:', error);
    });
  }
}

{% comment %} // H√†m X√ìA
function xoaSach1(ma_sach, button) {
  if (confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a s√°ch n√†y?')) {
    fetch("/api/xoa_sach_them/", {
      method: 'POST',
      headers: { 
        'Content-Type': 'application/x-www-form-urlencoded',
        'X-CSRFToken': csrftoken // n·∫øu c·∫ßn th√™m CSRF
      },
      body: 'ma_sach=' + encodeURIComponent(ma_sach)
    })
    .then(res => res.text())
    .then(data => {
      if (data.trim() === 'success') {
        alert('‚úÖ X√≥a th√†nh c√¥ng!');
        button.closest('tr').remove();  // X√ìA D√íNG NGAY
      } else {
        alert('‚ùå X√≥a th·∫•t b·∫°i: ' + data);
      }
    })
    .catch(error => {
      alert('‚ùå L·ªói k·∫øt n·ªëi!');
      console.error(error);
    });
  }
} {% endcomment %}

// H√†m S·ª¨A
function suaSach1(button) {
  const row = button.closest('tr');
  const cells = row.querySelectorAll('td');

  const ma_sach = cells[0].innerText;
  const ten_sach = cells[1].innerText;
  const tac_gia = cells[2].innerText;
  const mo_ta = cells[3].innerText;
  const danh_gia = cells[4].innerText;
  const ngay_xuat_ban = cells[5].innerText;

  cells[1].innerHTML = `<input value="${ten_sach}">`;
  cells[2].innerHTML = `<input value="${tac_gia}">`;
  cells[3].innerHTML = `<input value="${mo_ta}">`;
  cells[4].innerHTML = `<input value="${danh_gia}">`;
  cells[5].innerHTML = `<input type="date" value="${ngay_xuat_ban}">`;
  cells[6].innerHTML = `
    <button onclick="luuSuaSach1(this, '${ma_sach}')">L∆∞u</button>
    <button onclick="location.reload()">H·ªßy</button>
  `;
}

function luuSuaSach1(button, ma_sach) {
  const row = button.closest('tr');
  const inputs = row.querySelectorAll('input');

  const ten_sach = inputs[0].value;
  const tac_gia = inputs[1].value;
  const mo_ta = inputs[2].value;
  const danh_gia = inputs[3].value;
  const ngay_xuat_ban = inputs[4].value;

  fetch("{% url 'sua_sach_them' %}", {
  method: 'POST',
  headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
  body: new URLSearchParams({
    ma_sach,
    ten_sach,
    tac_gia,
    mo_ta,
    danh_gia,
    ngay_xuat_ban
  })
})
.then(res => res.text())
.then(data => {
  if (data.trim() === 'success') {
    alert('C·∫≠p nh·∫≠t th√†nh c√¥ng');
    location.reload();
  } else {
    alert('C·∫≠p nh·∫≠t th√†nh c√¥ng: ' + data);
  }
});
}
</script>
<!-- DANH MUC SACH -->
      <h2>Danh m·ª•c s√°ch</h2>
      <div class="category-grid">
        <div class="category-box">üìñ Khoa h·ªçc</div>
        <div class="category-box">üìò Kinh t·∫ø</div>
        <div class="category-box">üìï L·ªãch s·ª≠</div>
        <div class="category-box">üìó T√¢m l√Ω - K·ªπ nƒÉng</div>
        <div class="category-box">üìì VƒÉn h·ªçc</div>
        <div class="category-box">üìí C√¥ng ngh·ªá</div>
        <div class="category-box">üìô Thi·∫øu nhi</div>
        <div class="category-box">üìî Ti·ªÉu s·ª≠ - H·ªìi k√Ω</div>
      </div>
    <div class="section">
  <h2>S√°ch n·ªïi b·∫≠t</h2>
  <div class="book-grid">
    <div class="book-box">
  <img src="{% static 'user1/images/images/Untitled-2.png' %}" alt="B√¨a s√°ch 1">
  <h3>D·∫•n th√¢n</h3>
  <p>Cu·ªën s√°ch truy·ªÅn c·∫£m h·ª©ng v·ªÅ s·ª± nghi·ªáp v√† cu·ªôc s·ªëng.</p>
  <button>ƒê·ªçc s√°ch</button>
</div>

<div class="book-box">
  <img src="{% static 'user1/images/24.jpg' %}" alt="B√¨a s√°ch 2">
  <h3>Nh√† gi·∫£ kim</h3>
  <p>H√†nh tr√¨nh theo ƒëu·ªïi ∆∞·ªõc m∆° c·ªßa ch√†ng trai chƒÉn c·ª´u.</p>
  <button>ƒê·ªçc s√°ch</button>
</div>

<div class="book-box">
  <img src="{% static 'user1/images/images/Untitled-1.png' %}" alt="B√¨a s√°ch 3">
  <h3>Chu√¥ng</h3>
  <p>C√¢u chuy·ªán tu·ªïi th∆° s√¢u l·∫Øng ·ªü l√†ng qu√™ Vi·ªát Nam.</p>
  <button>ƒê·ªçc s√°ch</button>
</div>

<div class="book-box">
  <img src="{% static 'user1/images/images/Untitled-4.png' %}" alt="B√¨a s√°ch 4">
  <h3>ƒê·∫Øc nh√¢n t√¢m</h3>
  <p>B√≠ quy·∫øt x√¢y d·ª±ng c√°c m·ªëi quan h·ªá th√†nh c√¥ng.</p>
  <button>ƒê·ªçc s√°ch</button>
</div>

<div class="book-box">
  <img src="{% static 'user1/images/images/Untitled-3.png' %}" alt="B√¨a s√°ch 5">
  <h3>Tu·ªïi tr·∫ª ƒë√°ng gi√° bao nhi√™u</h3>
  <p>C·∫©m nang ƒë·ªÉ t·∫≠n h∆∞·ªüng v√† ph√°t tri·ªÉn b·∫£n th√¢n.</p>
  <button>ƒê·ªçc s√°ch</button>
</div>

<div class="book-box">
  <img src="{% static 'user1/images/images/Untitled-19.png' %}" alt="B√¨a s√°ch 6">
  <h3>Sapiens</h3>
  <p>L∆∞·ª£c s·ª≠ lo√†i ng∆∞·ªùi qua c√°c th·ªùi k·ª≥ ph√°t tri·ªÉn.</p>
  <button>ƒê·ªçc s√°ch</button>
</div>

<div class="book-box">
  <img src="{% static 'user1/images/images/Untitled-8.png' %}" alt="B√¨a s√°ch 7">
  <h3>Cha gi√†u cha ngh√®o</h3>
  <p>B√≠ quy·∫øt l√†m gi√†u v√† qu·∫£n l√Ω t√†i ch√≠nh c√° nh√¢n.</p>
  <button>ƒê·ªçc s√°ch</button>
</div>

<div class="book-box">
  <img src="{% static 'user1/images/images/Untitled-9.png' %}" alt="B√¨a s√°ch 8">
  <h3>Thi√™n nga ƒëen</h3>
  <p>Kh√°m ph√° c√°ch suy nghƒ© c·ªßa nh·ªØng ng∆∞·ªùi th√†nh ƒë·∫°t.</p>
  <button>ƒê·ªçc s√°ch</button>
</div>

<div class="book-box">
  <img src="{% static 'user1/images/images/Untitled-5.png' %}" alt="B√¨a s√°ch 9">
  <h3>7 th√≥i quen ƒë·ªÉ th√†nh ƒë·∫°t</h3>
  <p>Ti·∫øp t·ª•c h√†nh tr√¨nh t√¨m ki·∫øm ∆∞·ªõc m∆° v√† ch√¢n l√Ω.</p>
  <button>ƒê·ªçc s√°ch</button>
</div>

<div class="book-box">
  <img src="{% static 'user1/images/images/Untitled-6.png' %}" alt="B√¨a s√°ch 10">
  <h3>T∆∞ duy nhanh - ch·∫≠m</h3>
  <p>Nh·ªØng b√†i h·ªçc gi√∫p b·∫°n v∆∞∆°n t·ªõi ƒë·ªânh cao.</p>
  <button>ƒê·ªçc s√°ch</button>
</div>

<div class="book-box">
  <img src="{% static 'user1/images/images/Untitled-7.png' %}" alt="B√¨a s√°ch 11">
  <h3>Qu·∫≥ng g√°nh lo ƒëi</h3>
  <p>Ph√¢n t√≠ch h√†nh vi v√† suy nghƒ© t·∫≠p th·ªÉ c·ªßa con ng∆∞·ªùi.</p>
  <button>ƒê·ªçc s√°ch</button>
</div>

<div class="book-box">
  <img src="{% static 'user1/images/images/Untitled-10.png' %}" alt="B√¨a s√°ch 12">
  <h3>T·ª´ t·ªët ƒë·∫øn vƒ© ƒë·∫°i</h3>
  <p>Chia s·∫ª nh·ªØng tr·∫£i nghi·ªám v·ªÅ tri·∫øt h·ªçc ph∆∞∆°ng ƒê√¥ng.</p>
  <button>ƒê·ªçc s√°ch</button>
</div>

<div class="book-box">
  <img src="{% static 'user1/images/images/Untitled-11.png' %}" alt="B√¨a s√°ch 13">
  <h3>Tu·∫ßn l√†m vi·ªác 4 gi·ªù</h3>
  <p>Th·ªùi gian l√†m vi·ªác ƒë·∫°t hi·ªáu qu·∫£ trong tu·∫ßn.</p>
  <button>ƒê·ªçc s√°ch</button>
</div>

<div class="book-box">
  <img src="{% static 'user1/images/images/Untitled-12.png' %}" alt="B√¨a s√°ch 14">
  <h3>Ch·ª£p m·∫Øt</h3>
  <p>Gi·∫•c ng·ªß ng·∫Øn ch·∫•t l∆∞·ª£ng c√≥ th·ªÉ c·∫£i thi·ªán s·ª©c kh·ªèe.</p>
  <button>ƒê·ªçc s√°ch</button>
</div>

<div class="book-box">
  <img src="{% static 'user1/images/images/Untitled-13.png' %}" alt="B√¨a s√°ch 15">
  <h3>Ng∆∞ng l√£ng ph√≠ th·ªùi gian</h3>
  <p>H∆∞·ªõng d·∫´n t·∫≠p trung v√† qu·∫£n l√Ω th·ªùi gian.</p>
  <button>ƒê·ªçc s√°ch</button>
</div>

<div class="book-box">
  <img src="{% static 'user1/images/images/Untitled-14.png' %}" alt="B√¨a s√°ch 16">
  <h3>S·ªëng h·∫°nh ph√∫c</h3>
  <p>Chia s·∫ª c√°ch t√¨m s·ª± h√†i h√≤a gi·ªØa c√¥ng vi·ªác v√† cu·ªôc s·ªëng.</p>
  <button>ƒê·ªçc s√°ch</button>
</div>

<div class="book-box">
  <img src="{% static 'user1/images/images/Untitled-15.png' %}" alt="B√¨a s√°ch 17">
  <h3>Harry Potter</h3>
  <p>Harry Potter chi·∫øn ƒë·∫•u ch·ªëng Voldemort b·∫£o v·ªá th·∫ø gi·ªõi ph√©p thu·∫≠t.</p>
  <button>ƒê·ªçc s√°ch</button>
</div>

<div class="book-box">
  <img src="{% static 'user1/images/images/Untitled-16.png' %}" alt="B√¨a s√°ch 18">
  <h3>Kho·∫£ng kh·∫Øc th·ª©c t·ªânh</h3>
  <p>Gi√∫p nh·∫≠n ra b·∫£n ng√£ v√† s·ªëng t·ªânh th·ª©c.</p>
  <button>ƒê·ªçc s√°ch</button>
</div>

<div class="book-box">
  <img src="{% static 'user1/images/images/Untitled-17.png' %}" alt="B√¨a s√°ch 19">
  <h3>V≈© tr·ª•</h3>
  <p>Gi·∫£i m√£ v≈© tr·ª• qua thuy·∫øt t∆∞∆°ng ƒë·ªëi v√† l∆∞·ª£ng t·ª≠.</p>
  <button>ƒê·ªçc s√°ch</button>
</div>

<div class="book-box">
  <img src="{% static 'user1/images/images/Untitled-18.png' %}" alt="B√¨a s√°ch 20">
  <h3>L∆∞·ª£c s·ª≠ th·ªùi gian</h3>
  <p>Gi·∫£i th√≠ch ngu·ªìn g·ªëc v√† c·∫•u tr√∫c v≈© tr·ª•.</p>
  <button>ƒê·ªçc s√°ch</button>
</div>

<div class="book-box">
  <img src="{% static 'user1/images/images/Untitled-20.png' %}" alt="B√¨a s√°ch 21">
  <h3>L∆∞·ª£c s·ª≠ t∆∞∆°ng lai</h3>
  <p>D·ª± b√°o t∆∞∆°ng lai nh√¢n lo·∫°i v√† th·∫ø gi·ªõi.</p>
  <button>ƒê·ªçc s√°ch</button>
</div>

<div class="book-box">
  <img src="{% static 'user1/images/images/Untitled-21.png' %}" alt="B√¨a s√°ch 22">
  <h3>ƒêi t√¨m l·∫Ω s·ªëng</h3>
  <p>T√¨m √Ω nghƒ©a v√† m·ª•c ƒë√≠ch cu·ªôc s·ªëng.</p>
  <button>ƒê·ªçc s√°ch</button>
</div>

<div class="book-box">
  <img src="{% static 'user1/images/images/Untitled-23.png' %}" alt="B√¨a s√°ch 23">
  <h3>B√™n th·∫Øng cu·ªôc</h3>
  <p>K·ªÉ c√¢u chuy·ªán ƒë·∫•u tranh v√† chi·∫øn th·∫Øng.</p>
  <button>ƒê·ªçc s√°ch</button>
</div>

<div class="book-box">
  <img src="{% static 'user1/images/images/Untitled-24.png' %}" alt="B√¨a s√°ch 24">
  <h3>The Pragmatic</h3>
  <p>Ph√°t tri·ªÉn ph·∫ßn m·ªÅm hi·ªáu qu·∫£ v√† th·ª±c t·∫ø.</p>
  <button>ƒê·ªçc s√°ch</button>
</div>

<div class="book-box">
  <img src="{% static 'user1/images/images/Untitled-25.png' %}" alt="B√¨a s√°ch 25">
  <h3>T∆∞ duy truy t√¨m s·ª± th·∫≠t</h3>
  <p>Hi·ªÉu c·∫£m x√∫c, s·ªëng th·∫≠t v·ªõi b·∫£n th√¢n.</p>
  <button>ƒê·ªçc s√°ch</button>
</div>

<div class="book-box">
  <img src="{% static 'user1/images/images/Untitled-27.png' %}" alt="B√¨a s√°ch 26">
  <h3>The Daily Stoic</h3>
  <p>S·ªëng kh√¥n ngoan v√† ƒëi·ªÅm tƒ©nh m·ªói ng√†y.</p>
  <button>ƒê·ªçc s√°ch</button>
</div>

<div class="book-box">
  <img src="{% static 'user1/images/images/Untitled-28.png' %}" alt="B√¨a s√°ch 27">
  <h3>ALGORITHMS</h3>
  <p>Gi·∫£i th√≠ch c√°ch thi·∫øt k·∫ø v√† ph√¢n t√≠ch thu·∫≠t to√°n hi·ªáu qu·∫£.</p>
  <button>ƒê·ªçc s√°ch</button>
</div>

<div class="book-box">
  <img src="{% static 'user1/images/images/Untitled-29.png' %}" alt="B√¨a s√°ch 28">
  <h3>Search</h3>
  <p>H√†nh tr√¨nh kh√°m ph√° khoa h·ªçc v√† con ng∆∞·ªùi.</p>
  <button>ƒê·ªçc s√°ch</button>
</div>

<div class="book-box">
  <img src="{% static 'user1/images/images/Untitled-30.png' %}" alt="B√¨a s√°ch 29">
  <h3>Clean code</h3>
  <p>D·∫°y c√°ch vi·∫øt m√£ ngu·ªìn r√µ r√†ng, d·ªÖ ƒë·ªçc v√† b·∫£o tr√¨.</p>
  <button>ƒê·ªçc s√°ch</button>
</div>

<div class="book-box">
  <img src="{% static 'user1/images/images/Untitled-33.png' %}" alt="B√¨a s√°ch 30">
  <h3>The Ocean</h3>
  <p>K·∫øt n·ªëi s√¢u s·∫Øc gi·ªØa con ng∆∞·ªùi v√† bi·ªÉn.</p>
  <button>ƒê·ªçc s√°ch</button>
</div>
  </div>
  <script>
// --- L·∫•y CSRF token t·ª´ cookie ---
function getCookie(name) {
    let cookieValue = null;
    if (document.cookie && document.cookie !== '') {
        const cookies = document.cookie.split(';');
        for (let cookie of cookies) {
            cookie = cookie.trim();
            if (cookie.substring(0, name.length + 1) === (name + '=')) {
                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                break;
            }
        }
    }
    return cookieValue;
}
const csrftoken = getCookie('csrftoken');

// --- H√†m xo√° s√°ch ---
function xoaSach(ma_sach) {
    fetch('/xoa_sach/', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/x-www-form-urlencoded',
            'X-CSRFToken': csrftoken
        },
        body: 'ma_sach=' + encodeURIComponent(ma_sach)
    })
    .then(response => response.json())
    .then(data => {
        if (data === 'success') {
            alert('‚úÖ X√≥a s√°ch th√†nh c√¥ng!');
            location.reload(); // C·∫≠p nh·∫≠t l·∫°i danh s√°ch n·∫øu c·∫ßn
        } else {
            alert('‚ùå X√≥a s√°ch th√†nh c√¥ng!');
        }
    })
    .catch(error => {
        console.error('L·ªói:', error);
        alert('‚ùå ƒê√£ x·∫£y ra l·ªói!');
    });
}
</script>
  <script>
    function searchBook() {
      const query = document.getElementById('searchInput').value.trim().toLowerCase();

      // X√≥a class 'found' ·ªü t·∫•t c·∫£ ti√™u ƒë·ªÅ s√°ch tr∆∞·ªõc
      document.querySelectorAll('.book-grid h3').forEach(el => {
        el.classList.remove('found');
      });

      if (!query) {
        alert("Vui l√≤ng nh·∫≠p t√™n s√°ch ƒë·ªÉ t√¨m ki·∫øm!");
        return;
      }

      // T√¨m c√°c ti√™u ƒë·ªÅ s√°ch v√† so s√°nh
      const titles = document.querySelectorAll('.book-grid h3');
      let found = false;

      titles.forEach(title => {
        if (title.textContent.trim().toLowerCase() === query) {
          title.classList.add('found');
          title.scrollIntoView({behavior: "smooth", block: "center"});
          alert("ƒê√£ t√¨m th·∫•y s√°ch: " + title.textContent);
          found = true;
        }
      });

      if (!found) {
        alert("Kh√¥ng t√¨m th·∫•y s√°ch!");
      }
    }
  </script>
</div>

<footer>
      <div class="footer-row">
        <div>
          <h4>About</h4>
          <p>About GTDLL</p>
          <p>How it works</p>
          <p>Careers</p>
        </div>
        <div>
          <h4>Partner with us</h4>
          <p>Affiliate program</p>
          <p>Promotions</p>
        </div>
        <div>
          <h4>Support</h4>
          <p>Help Center</p>
          <p>Feedback</p>
        </div>
        <div>
          <h4>Get the app</h4>
          <img src="{% static 'user1/images/app.jpg' %}" alt="App Store">
          <img src="{% static 'user1/images/gg.jpg' %}" alt="Google Play">
        </div>
      </div>
      <p class="copyright">¬© 2025 GTDLL Incorporated</p>
    </footer>
  </div>
  </div>

  <style>
    .category-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      padding: 20px;
    }

    .category-box {
      background-color: #444;
      color: white;
      text-align: center;
      padding: 30px 10px;
      border-radius: 10px;
      font-size: 18px;
      font-weight: bold;
      transition: background-color 0.3s;
      cursor: pointer;
    }

    .category-box:hover {
      background-color: #666;
    }

    .sidebar ul li a {
      text-decoration: none;
      color: white;
      display: block;
      padding: 8px;
      border-radius: 6px;
    }

    .sidebar ul li a:hover {
      background-color: #1b0cc3;
    }

    .sidebar ul li.active a {
      background-color: #0f34db;
    }
    .book-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 25px;
  padding: 20px;
}

.book-box {
  background-color: #fff;
  border-radius: 10px;
  box-shadow: 0 4px 6px rgba(0,0,0,0.1);
  text-align: center;
  padding: 15px;
  transition: transform 0.2s;
}

.book-box:hover {
  transform: translateY(-5px);
}

.book-box img {
  width: 100%;
  height: auto;
  border-radius: 6px;
}

.book-box h3 {
  margin: 10px 0 5px;
  font-size: 1.1em;
  color: #333;
}
.book-box h3.found {
      color: #0f34db; /* m√†u xanh d∆∞∆°ng khi t√¨m th·∫•y */
      font-weight: bold;
    }

.book-box p {
  font-size: 0.95em;
  color: #666;
  margin-bottom: 10px;
}

.book-box button {
  background-color: #4a6c6f;
  color: white;
  border: none;
  padding: 8px 14px;
  border-radius: 6px;
  cursor: pointer;
}

.book-box button:hover {
  background-color: #3a5557;
}

  </style>
</body>
</html>
